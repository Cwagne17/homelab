# =============================================================================
# Dev Overlay - Root App-of-Apps
#
# This overlay creates the root app-of-apps pointing to k8s/apps/overlays/dev.
#
# Prerequisites:
#   1. Install ArgoCD first: kubectl apply -k k8s/bootstrap
#   2. Wait for ArgoCD to be ready
#   3. Then apply this: kubectl apply -k k8s/overlays/dev
# =============================================================================
---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: argocd

resources:
  # Root app-of-apps
  - ../../base/bootstrap

patches:
  # Patch the root app to point to dev apps
  - path: root-app-dev.patch.yaml
    target:
      kind: Application
      name: root

commonLabels:
  environment: development
  cluster: local
